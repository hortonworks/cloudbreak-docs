digraph {
INIT_STATE [label="StackCreationFlowConfig" shape=ellipse color=green];
INIT_STATE -> SETUP_STATE [label="START_CREATION_EVENT" color=black style=solid];
INIT_STATE -> SETUP_STATE [label="START_STACKANDCLUSTER_CREATION_EVENT" color=black style=solid];
SETUP_STATE -> IMAGESETUP_STATE [label="SETUP_FINISHED_EVENT" color=black style=solid];
SETUP_STATE -> STACK_CREATION_FAILED_STATE [label="SETUP_FAILED_EVENT" color=red style=dashed];
STACK_CREATION_FAILED_STATE -> FINAL_STATE [label="STACKCREATION_FAILURE_HANDLED_EVENT" color=red style=dashed];
IMAGE_CHECK_STATE [label="IMAGE_CHECK_STATE\nCheckImageAction" shape=rect color=black];
IMAGESETUP_STATE -> IMAGE_CHECK_STATE [label="IMAGE_PREPARATION_FINISHED_EVENT" color=black style=solid];
IMAGESETUP_STATE -> STACK_CREATION_FAILED_STATE [label="IMAGE_PREPARATION_FAILED_EVENT" color=red style=dashed];
IMAGE_CHECK_STATE -> IMAGE_CHECK_STATE [label="IMAGE_COPY_CHECK_EVENT" color=blue style=solid];
IMAGE_CHECK_STATE -> STACK_CREATION_FAILED_STATE [label="IMAGE_COPY_FAILED_EVENT" color=red style=dashed];
IMAGE_CHECK_STATE -> START_PROVISIONING_STATE [label="IMAGE_COPY_FINISHED_EVENT" color=black style=solid];
START_PROVISIONING_STATE -> PROVISIONING_FINISHED_STATE [label="LAUNCH_STACK_FINISHED_EVENT" color=black style=solid];
START_PROVISIONING_STATE -> STACK_CREATION_FAILED_STATE [label="LAUNCH_STACK_FAILED_EVENT" color=red style=dashed];
PROVISIONING_FINISHED_STATE -> COLLECTMETADATA_STATE [label="COLLECT_METADATA_FINISHED_EVENT" color=black style=solid];
PROVISIONING_FINISHED_STATE -> STACK_CREATION_FAILED_STATE [label="COLLECT_METADATA_FAILED_EVENT" color=red style=dashed];
COLLECTMETADATA_STATE -> TLS_SETUP_STATE [label="SSHFINGERPRINTS_EVENT" color=black style=solid];
COLLECTMETADATA_STATE -> STACK_CREATION_FAILED_STATE [label="SSHFINGERPRINTS_FAILED_EVENT" color=red style=dashed];
TLS_SETUP_STATE -> BOOTSTRAP_MACHINES_STATE [label="BOOTSTRAP_MACHINES_FINISHED_EVENT" color=black style=solid];
TLS_SETUP_STATE -> STACK_CREATION_FAILED_STATE [label="BOOTSTRAP_MACHINES_FAILED_EVENT" color=red style=dashed];
BOOTSTRAP_MACHINES_STATE -> CONSUL_METADATA_SETUP [label="CONSUL_METADATASETUP_FINISHED_EVENT" color=black style=solid];
BOOTSTRAP_MACHINES_STATE -> STACK_CREATION_FAILED_STATE [label="CONSUL_METADATASETUP_FAILED_EVENT" color=red style=dashed];
CONSUL_METADATA_SETUP -> FINAL_STATE [label="STACK_CREATION_FINISHED_EVENT" color=black style=solid];
CONSUL_METADATA_SETUP -> STACK_CREATION_FAILED_STATE [label="STACK_CREATION_FAILED_EVENT" color=red style=dashed];
}